/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/stripe/webhook/route";
exports.ids = ["app/api/stripe/webhook/route"];
exports.modules = {

/***/ "(rsc)/./app/api/stripe/webhook/route.ts":
/*!*****************************************!*\
  !*** ./app/api/stripe/webhook/route.ts ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   POST: () => (/* binding */ POST),\n/* harmony export */   config: () => (/* binding */ config)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var fs_promises__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! fs/promises */ \"fs/promises\");\n/* harmony import */ var fs_promises__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(fs_promises__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var stripe__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! stripe */ \"(rsc)/./node_modules/stripe/esm/stripe.esm.node.js\");\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! path */ \"path\");\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(path__WEBPACK_IMPORTED_MODULE_3__);\n\n\n\n\nconst stripe = new stripe__WEBPACK_IMPORTED_MODULE_2__[\"default\"](process.env.STRIPE_SECRET_KEY, {\n    apiVersion: '2025-06-30.basil'\n});\nconst config = {\n    api: {\n        bodyParser: false\n    }\n};\n// Helper for reading raw body\nasync function buffer(readable) {\n    const reader = readable.getReader();\n    const chunks = [];\n    while(true){\n        const { done, value } = await reader.read();\n        if (done) break;\n        if (value) chunks.push(value);\n    }\n    return Buffer.concat(chunks);\n}\n// The clearReferralMetadata helper function, which clears fields related to referral bonuses in Stripe client metadata\nasync function clearReferralMetadata(customerId) {\n    try {\n        await stripe.customers.update(customerId, {\n            metadata: {\n                referred_customer_ids: '',\n                referral_count: '',\n                referral_bonus: ''\n            }\n        });\n        console.log(`Referral metadata cleared for customer ${customerId}`);\n    } catch (error) {\n        console.error(`Failed to clear referral metadata for ${customerId}:`, error);\n    }\n}\nasync function POST(req) {\n    const webhookSecret = process.env.STRIPE_WEBHOOK_SECRET;\n    const sig = req.headers.get('stripe-signature');\n    if (!sig) {\n        return new next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse('Missing stripe-signature header', {\n            status: 400\n        });\n    }\n    let event;\n    try {\n        const rawBody = await buffer(req.body);\n        event = stripe.webhooks.constructEvent(rawBody, sig, webhookSecret);\n    } catch (err) {\n        console.error('Webhook signature verification failed:', err.message);\n        return new next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse(`Webhook Error: ${err.message}`, {\n            status: 400\n        });\n    }\n    // Immediately acknowledge the webhook to prevent timeouts\n    if (event.type === 'invoice.paid') {\n        // Process asynchronously to avoid webhook timeout\n        processInvoicePaid(event.data.object);\n    } else if (event.type === 'checkout.session.completed') {\n        // Handle checkout completion for immediate PDF generation trigger\n        const session = event.data.object;\n        if (session.payment_status === 'paid') {\n            console.log('-> stripe-> webhook-> Checkout session completed with payment');\n        // Additional processing can be added here if needed\n        }\n    }\n    return new next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse('Webhook received', {\n        status: 200\n    });\n}\n// Separate async function to handle invoice processing\nasync function processInvoicePaid(invoice) {\n    try {\n        console.log('-> stripe-> webhook-> Invoice paid:', invoice.id);\n        const customerId = typeof invoice.customer === 'string' ? invoice.customer : invoice.customer?.id;\n        if (!customerId) {\n            console.warn('No customer ID found on invoice');\n            return;\n        }\n        // === 1. Saving a PDF invoice ===\n        try {\n            console.log(`-> stripe-> webhook-> processInvoicePaid-> triggering PDF invoice generation for customer ${customerId}`);\n            const res = await fetch(`${\"http://localhost:3000\"}/api/invoice/${customerId}/pdf`, {\n                method: 'GET',\n                headers: {\n                    'Content-Type': 'application/pdf'\n                }\n            });\n            console.log(`-> stripe-> webhook-> processInvoicePaid-> PDF generation response: ${res.status}`);\n            if (res.ok) {\n                const pdfBuffer = await res.arrayBuffer();\n                const filename = `invoice-${invoice.number || invoice.id}.pdf`;\n                const filePath = path__WEBPACK_IMPORTED_MODULE_3___default().join(process.cwd(), 'public/generated-pdfs', filename);\n                await (0,fs_promises__WEBPACK_IMPORTED_MODULE_1__.mkdir)(path__WEBPACK_IMPORTED_MODULE_3___default().dirname(filePath), {\n                    recursive: true\n                });\n                await (0,fs_promises__WEBPACK_IMPORTED_MODULE_1__.writeFile)(filePath, Buffer.from(pdfBuffer));\n                console.log(`PDF invoice successfully saved: ${filePath}`);\n                // Log file size for verification\n                const stats = await Promise.resolve(/*! import() */).then(__webpack_require__.t.bind(__webpack_require__, /*! fs/promises */ \"fs/promises\", 23)).then((fs)=>fs.stat(filePath));\n                console.log(`PDF file size: ${stats.size} bytes`);\n            } else {\n                const errorText = await res.text();\n                console.error(`Failed to fetch PDF invoice: ${res.status} - ${errorText}`);\n            }\n        } catch (err) {\n            console.error('Error saving PDF invoice:', err);\n        }\n        // === 2. Referral Bonus Logic ===\n        try {\n            console.log(`-> stripe-> webhook-> Referral Bonus Logic start`);\n            const subscriptionId = invoice['subscription'] && typeof invoice['subscription'] === 'object' ? invoice['subscription']['id'] : invoice['subscription'];\n            if (!subscriptionId) {\n                console.warn('No subscription ID found on invoice');\n                return;\n            }\n            const subscription = await stripe.subscriptions.retrieve(subscriptionId);\n            const referralCode = subscription.metadata?.['referralCode'];\n            if (!referralCode || referralCode.trim() === '') {\n                console.log('No referral code found â€” no bonus applied.');\n                return;\n            }\n            // Check if this is a subscription or SLA purchase\n            const productType = subscription.metadata?.['productType'];\n            const slaTier = subscription.metadata?.['slaTier'];\n            console.log(`Processing referral bonus for ${productType} purchase, SLA tier: ${slaTier}`);\n            // Getting the inviting customer via referralCode (customer.id)\n            const referrerCustomer = await stripe.customers.retrieve(referralCode);\n            if (!referrerCustomer || referrerCustomer.deleted) {\n                console.warn(`Referrer customer not found or deleted: ${referralCode}`);\n                return;\n            }\n            // Getting a subscription of inviting customer (referrer).\n            const referrerSubs = await stripe.subscriptions.list({\n                customer: referralCode,\n                status: 'active',\n                limit: 1\n            });\n            if (referrerSubs.data.length === 0) {\n                console.warn(`No active subscription found for referrer ${referralCode}`);\n                return;\n            }\n            const referrerSub = referrerSubs.data[0];\n            // Always add bonus for each referral, regardless of whether customer was referred before\n            const referredCustomerId = subscription.customer;\n            // Track all referral events for logging purposes\n            const referredListRaw = referrerCustomer['metadata'] && referrerCustomer['metadata']['referred_customer_ids'] || '';\n            const referredIds = referredListRaw ? referredListRaw.split(',') : [];\n            // Always add the customer ID to track all referral events\n            referredIds.push(referredCustomerId);\n            await stripe.customers.update(referralCode, {\n                metadata: {\n                    referred_customer_ids: referredIds.join(',')\n                }\n            });\n            console.log(`Added referral bonus: ${referredCustomerId} referred by ${referralCode} (total referrals: ${referredIds.length})`);\n            // Calculation of renewal date: current_period_end + 1 month for this referral\n            const currentPeriodEnd = referrerSub['current_period_end'] || referrerSub.items?.data?.[0]?.['current_period_end'] || referrerSub['trial_end'];\n            if (!currentPeriodEnd || isNaN(currentPeriodEnd)) {\n                console.warn(`Invalid or missing current_period_end (or fallback) for subscription ${referrerSub.id}`);\n                return;\n            }\n            // Check if subscription already has pause_collection with resumes_at\n            let existingResumesAt = currentPeriodEnd;\n            if (referrerSub.pause_collection?.resumes_at) {\n                existingResumesAt = referrerSub.pause_collection.resumes_at;\n                console.log(`Existing bonus time found, resumes_at: ${new Date(existingResumesAt * 1000).toISOString()}`);\n            }\n            // Always add 1 month bonus for each referral, even for repeat customers\n            const additionalMonths = 1;\n            const newResumesAt = existingResumesAt + additionalMonths * 30 * 24 * 60 * 60; // 1 month for this referral\n            //const newResumesAt = existingResumesAt + additionalMonths * 60; // test: 1 minute per referral\n            await stripe.subscriptions.update(referrerSub.id, {\n                pause_collection: {\n                    behavior: 'mark_uncollectible',\n                    resumes_at: newResumesAt\n                }\n            });\n            console.log(`Referrer ${referralCode} received bonus: subscription extended by ${referredIds.length} month(s), new resume date: ${new Date(newResumesAt * 1000).toISOString()}`);\n        } catch (err) {\n            console.error('Referral reward error:', err);\n        }\n    } catch (error) {\n        console.error('Error processing invoice:', error);\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Q0Y7WUFFQSxxRUFBcUU7WUFDckUsSUFBSStDLG9CQUFvQkg7WUFDeEIsSUFBSUwsWUFBWVMsZ0JBQWdCLEVBQUVDLFlBQVk7Z0JBQzVDRixvQkFBb0JSLFlBQVlTLGdCQUFnQixDQUFDQyxVQUFVO2dCQUMzRDFFLFFBQVFDLEdBQUcsQ0FBQyxDQUFDLHVDQUF1QyxFQUFFLElBQUkwRSxLQUFLSCxvQkFBb0IsTUFBTUksV0FBVyxJQUFJO1lBQzFHO1lBRUEsd0VBQXdFO1lBQ3hFLE1BQU1DLG1CQUFtQjtZQUN6QixNQUFNQyxlQUFlTixvQkFBb0JLLG1CQUFtQixLQUFLLEtBQUssS0FBSyxJQUFJLDRCQUE0QjtZQUMzRyxnR0FBZ0c7WUFFaEcsTUFBTXhHLE9BQU8rRSxhQUFhLENBQUN6RCxNQUFNLENBQUNxRSxZQUFZdkMsRUFBRSxFQUFFO2dCQUNoRGdELGtCQUFrQjtvQkFDaEJNLFVBQVU7b0JBQ1ZMLFlBQVlJO2dCQUNkO1lBQ0Y7WUFFQTlFLFFBQVFDLEdBQUcsQ0FDVCxDQUFDLFNBQVMsRUFBRXFELGFBQWEsMENBQTBDLEVBQUVhLFlBQVlKLE1BQU0sQ0FBQyw0QkFBNEIsRUFBRSxJQUFJWSxLQUN4SEcsZUFBZSxNQUNmRixXQUFXLElBQUk7UUFFckIsRUFBRSxPQUFPNUQsS0FBSztZQUNaaEIsUUFBUUUsS0FBSyxDQUFDLDBCQUEwQmM7UUFDMUM7SUFDRixFQUFFLE9BQU9kLE9BQU87UUFDZEYsUUFBUUUsS0FBSyxDQUFDLDZCQUE2QkE7SUFDN0M7QUFDRiIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxEbWl0cnlLaXBvcmVua29cXERlc2t0b3BcXG5ld1xcc3Vic2NyaXB0aW9ucy1VQUhcXGFwcFxcYXBpXFxzdHJpcGVcXHdlYmhvb2tcXHJvdXRlLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE5leHRSZXF1ZXN0LCBOZXh0UmVzcG9uc2UgfSBmcm9tICduZXh0L3NlcnZlcic7XHJcbmltcG9ydCB7IHdyaXRlRmlsZSwgbWtkaXIgfSBmcm9tICdmcy9wcm9taXNlcyc7XHJcbmltcG9ydCBTdHJpcGUgZnJvbSAnc3RyaXBlJztcclxuaW1wb3J0IHBhdGggZnJvbSAncGF0aCc7XHJcblxyXG5jb25zdCBzdHJpcGUgPSBuZXcgU3RyaXBlKHByb2Nlc3MuZW52LlNUUklQRV9TRUNSRVRfS0VZISwge1xyXG4gIGFwaVZlcnNpb246ICcyMDI1LTA2LTMwLmJhc2lsJyxcclxufSk7XHJcblxyXG5leHBvcnQgY29uc3QgY29uZmlnID0ge1xyXG4gIGFwaToge1xyXG4gICAgYm9keVBhcnNlcjogZmFsc2UsXHJcbiAgfSxcclxufTtcclxuXHJcbi8vIEhlbHBlciBmb3IgcmVhZGluZyByYXcgYm9keVxyXG5hc3luYyBmdW5jdGlvbiBidWZmZXIocmVhZGFibGU6IFJlYWRhYmxlU3RyZWFtPFVpbnQ4QXJyYXk+KSB7XHJcbiAgY29uc3QgcmVhZGVyID0gcmVhZGFibGUuZ2V0UmVhZGVyKCk7XHJcbiAgY29uc3QgY2h1bmtzOiBVaW50OEFycmF5W10gPSBbXTtcclxuXHJcbiAgd2hpbGUgKHRydWUpIHtcclxuICAgIGNvbnN0IHsgZG9uZSwgdmFsdWUgfSA9IGF3YWl0IHJlYWRlci5yZWFkKCk7XHJcbiAgICBpZiAoZG9uZSkgYnJlYWs7XHJcbiAgICBpZiAodmFsdWUpIGNodW5rcy5wdXNoKHZhbHVlKTtcclxuICB9XHJcblxyXG4gIHJldHVybiBCdWZmZXIuY29uY2F0KGNodW5rcyk7XHJcbn1cclxuXHJcbi8vIFRoZSBjbGVhclJlZmVycmFsTWV0YWRhdGEgaGVscGVyIGZ1bmN0aW9uLCB3aGljaCBjbGVhcnMgZmllbGRzIHJlbGF0ZWQgdG8gcmVmZXJyYWwgYm9udXNlcyBpbiBTdHJpcGUgY2xpZW50IG1ldGFkYXRhXHJcbmFzeW5jIGZ1bmN0aW9uIGNsZWFyUmVmZXJyYWxNZXRhZGF0YShjdXN0b21lcklkOiBzdHJpbmcpIHtcclxuICB0cnkge1xyXG4gICAgYXdhaXQgc3RyaXBlLmN1c3RvbWVycy51cGRhdGUoY3VzdG9tZXJJZCwge1xyXG4gICAgICBtZXRhZGF0YToge1xyXG4gICAgICAgIHJlZmVycmVkX2N1c3RvbWVyX2lkczogJycsXHJcbiAgICAgICAgcmVmZXJyYWxfY291bnQ6ICcnLFxyXG4gICAgICAgIHJlZmVycmFsX2JvbnVzOiAnJyxcclxuICAgICAgfSxcclxuICAgIH0pO1xyXG4gICAgXHJcbiAgICBjb25zb2xlLmxvZyhgUmVmZXJyYWwgbWV0YWRhdGEgY2xlYXJlZCBmb3IgY3VzdG9tZXIgJHtjdXN0b21lcklkfWApO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKGBGYWlsZWQgdG8gY2xlYXIgcmVmZXJyYWwgbWV0YWRhdGEgZm9yICR7Y3VzdG9tZXJJZH06YCwgZXJyb3IpO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIFBPU1QocmVxOiBOZXh0UmVxdWVzdCkge1xyXG4gIGNvbnN0IHdlYmhvb2tTZWNyZXQgPSBwcm9jZXNzLmVudi5TVFJJUEVfV0VCSE9PS19TRUNSRVQhO1xyXG4gIGNvbnN0IHNpZyA9IHJlcS5oZWFkZXJzLmdldCgnc3RyaXBlLXNpZ25hdHVyZScpO1xyXG5cclxuICBpZiAoIXNpZykge1xyXG4gICAgcmV0dXJuIG5ldyBOZXh0UmVzcG9uc2UoJ01pc3Npbmcgc3RyaXBlLXNpZ25hdHVyZSBoZWFkZXInLCB7IHN0YXR1czogNDAwIH0pO1xyXG4gIH1cclxuXHJcbiAgbGV0IGV2ZW50OiBTdHJpcGUuRXZlbnQ7XHJcblxyXG4gIHRyeSB7XHJcbiAgICBjb25zdCByYXdCb2R5ID0gYXdhaXQgYnVmZmVyKHJlcS5ib2R5ISk7XHJcbiAgICBldmVudCA9IHN0cmlwZS53ZWJob29rcy5jb25zdHJ1Y3RFdmVudChyYXdCb2R5LCBzaWcsIHdlYmhvb2tTZWNyZXQpO1xyXG4gIH0gY2F0Y2ggKGVycjogYW55KSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdXZWJob29rIHNpZ25hdHVyZSB2ZXJpZmljYXRpb24gZmFpbGVkOicsIGVyci5tZXNzYWdlKTtcclxuICAgIHJldHVybiBuZXcgTmV4dFJlc3BvbnNlKGBXZWJob29rIEVycm9yOiAke2Vyci5tZXNzYWdlfWAsIHsgc3RhdHVzOiA0MDAgfSk7XHJcbiAgfVxyXG5cclxuICAvLyBJbW1lZGlhdGVseSBhY2tub3dsZWRnZSB0aGUgd2ViaG9vayB0byBwcmV2ZW50IHRpbWVvdXRzXHJcbiAgaWYgKGV2ZW50LnR5cGUgPT09ICdpbnZvaWNlLnBhaWQnKSB7XHJcbiAgICAvLyBQcm9jZXNzIGFzeW5jaHJvbm91c2x5IHRvIGF2b2lkIHdlYmhvb2sgdGltZW91dFxyXG4gICAgcHJvY2Vzc0ludm9pY2VQYWlkKGV2ZW50LmRhdGEub2JqZWN0IGFzIFN0cmlwZS5JbnZvaWNlKTtcclxuICB9IGVsc2UgaWYgKGV2ZW50LnR5cGUgPT09ICdjaGVja291dC5zZXNzaW9uLmNvbXBsZXRlZCcpIHtcclxuICAgIC8vIEhhbmRsZSBjaGVja291dCBjb21wbGV0aW9uIGZvciBpbW1lZGlhdGUgUERGIGdlbmVyYXRpb24gdHJpZ2dlclxyXG4gICAgY29uc3Qgc2Vzc2lvbiA9IGV2ZW50LmRhdGEub2JqZWN0IGFzIFN0cmlwZS5DaGVja291dC5TZXNzaW9uO1xyXG4gICAgaWYgKHNlc3Npb24ucGF5bWVudF9zdGF0dXMgPT09ICdwYWlkJykge1xyXG4gICAgICBjb25zb2xlLmxvZygnLT4gc3RyaXBlLT4gd2ViaG9vay0+IENoZWNrb3V0IHNlc3Npb24gY29tcGxldGVkIHdpdGggcGF5bWVudCcpO1xyXG4gICAgICAvLyBBZGRpdGlvbmFsIHByb2Nlc3NpbmcgY2FuIGJlIGFkZGVkIGhlcmUgaWYgbmVlZGVkXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICByZXR1cm4gbmV3IE5leHRSZXNwb25zZSgnV2ViaG9vayByZWNlaXZlZCcsIHsgc3RhdHVzOiAyMDAgfSk7XHJcbn1cclxuXHJcbi8vIFNlcGFyYXRlIGFzeW5jIGZ1bmN0aW9uIHRvIGhhbmRsZSBpbnZvaWNlIHByb2Nlc3NpbmdcclxuYXN5bmMgZnVuY3Rpb24gcHJvY2Vzc0ludm9pY2VQYWlkKGludm9pY2U6IFN0cmlwZS5JbnZvaWNlKSB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnNvbGUubG9nKCctPiBzdHJpcGUtPiB3ZWJob29rLT4gSW52b2ljZSBwYWlkOicsIGludm9pY2UuaWQpO1xyXG5cclxuICAgIGNvbnN0IGN1c3RvbWVySWQgPSB0eXBlb2YgaW52b2ljZS5jdXN0b21lciA9PT0gJ3N0cmluZydcclxuICAgICAgPyBpbnZvaWNlLmN1c3RvbWVyXHJcbiAgICAgIDogaW52b2ljZS5jdXN0b21lcj8uaWQ7XHJcblxyXG4gICAgaWYgKCFjdXN0b21lcklkKSB7XHJcbiAgICAgIGNvbnNvbGUud2FybignTm8gY3VzdG9tZXIgSUQgZm91bmQgb24gaW52b2ljZScpO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgLy8gPT09IDEuIFNhdmluZyBhIFBERiBpbnZvaWNlID09PVxyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc29sZS5sb2coYC0+IHN0cmlwZS0+IHdlYmhvb2stPiBwcm9jZXNzSW52b2ljZVBhaWQtPiB0cmlnZ2VyaW5nIFBERiBpbnZvaWNlIGdlbmVyYXRpb24gZm9yIGN1c3RvbWVyICR7Y3VzdG9tZXJJZH1gKTtcclxuICAgICAgXHJcbiAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKFxyXG4gICAgICAgIGAke3Byb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0FQSV9VUkx9L2FwaS9pbnZvaWNlLyR7Y3VzdG9tZXJJZH0vcGRmYCxcclxuICAgICAgICB7XHJcbiAgICAgICAgICBtZXRob2Q6ICdHRVQnLFxyXG4gICAgICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL3BkZicsXHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgIH1cclxuICAgICAgKTtcclxuICAgICAgXHJcbiAgICAgIGNvbnNvbGUubG9nKGAtPiBzdHJpcGUtPiB3ZWJob29rLT4gcHJvY2Vzc0ludm9pY2VQYWlkLT4gUERGIGdlbmVyYXRpb24gcmVzcG9uc2U6ICR7cmVzLnN0YXR1c31gKTtcclxuXHJcbiAgICAgIGlmIChyZXMub2spIHtcclxuICAgICAgICBjb25zdCBwZGZCdWZmZXIgPSBhd2FpdCByZXMuYXJyYXlCdWZmZXIoKTtcclxuICAgICAgICBjb25zdCBmaWxlbmFtZSA9IGBpbnZvaWNlLSR7aW52b2ljZS5udW1iZXIgfHwgaW52b2ljZS5pZH0ucGRmYDtcclxuICAgICAgICBjb25zdCBmaWxlUGF0aCA9IHBhdGguam9pbihwcm9jZXNzLmN3ZCgpLCAncHVibGljL2dlbmVyYXRlZC1wZGZzJywgZmlsZW5hbWUpO1xyXG5cclxuICAgICAgICBhd2FpdCBta2RpcihwYXRoLmRpcm5hbWUoZmlsZVBhdGgpLCB7IHJlY3Vyc2l2ZTogdHJ1ZSB9KTtcclxuICAgICAgICBhd2FpdCB3cml0ZUZpbGUoZmlsZVBhdGgsIEJ1ZmZlci5mcm9tKHBkZkJ1ZmZlcikpO1xyXG5cclxuICAgICAgICBjb25zb2xlLmxvZyhgUERGIGludm9pY2Ugc3VjY2Vzc2Z1bGx5IHNhdmVkOiAke2ZpbGVQYXRofWApO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIExvZyBmaWxlIHNpemUgZm9yIHZlcmlmaWNhdGlvblxyXG4gICAgICAgIGNvbnN0IHN0YXRzID0gYXdhaXQgaW1wb3J0KCdmcy9wcm9taXNlcycpLnRoZW4oZnMgPT4gZnMuc3RhdChmaWxlUGF0aCkpO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGBQREYgZmlsZSBzaXplOiAke3N0YXRzLnNpemV9IGJ5dGVzYCk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgY29uc3QgZXJyb3JUZXh0ID0gYXdhaXQgcmVzLnRleHQoKTtcclxuICAgICAgICBjb25zb2xlLmVycm9yKGBGYWlsZWQgdG8gZmV0Y2ggUERGIGludm9pY2U6ICR7cmVzLnN0YXR1c30gLSAke2Vycm9yVGV4dH1gKTtcclxuICAgICAgfVxyXG4gICAgfSBjYXRjaCAoZXJyKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHNhdmluZyBQREYgaW52b2ljZTonLCBlcnIpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vID09PSAyLiBSZWZlcnJhbCBCb251cyBMb2dpYyA9PT1cclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnNvbGUubG9nKGAtPiBzdHJpcGUtPiB3ZWJob29rLT4gUmVmZXJyYWwgQm9udXMgTG9naWMgc3RhcnRgKTtcclxuXHJcbiAgICAgIGNvbnN0IHN1YnNjcmlwdGlvbklkID1cclxuICAgICAgICBpbnZvaWNlWydzdWJzY3JpcHRpb24nXSAmJiB0eXBlb2YgaW52b2ljZVsnc3Vic2NyaXB0aW9uJ10gPT09ICdvYmplY3QnXHJcbiAgICAgICAgICA/IGludm9pY2VbJ3N1YnNjcmlwdGlvbiddWydpZCddXHJcbiAgICAgICAgICA6IGludm9pY2VbJ3N1YnNjcmlwdGlvbiddO1xyXG5cclxuICAgICAgaWYgKCFzdWJzY3JpcHRpb25JZCkge1xyXG4gICAgICAgIGNvbnNvbGUud2FybignTm8gc3Vic2NyaXB0aW9uIElEIGZvdW5kIG9uIGludm9pY2UnKTtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGNvbnN0IHN1YnNjcmlwdGlvbiA9IGF3YWl0IHN0cmlwZS5zdWJzY3JpcHRpb25zLnJldHJpZXZlKHN1YnNjcmlwdGlvbklkKTtcclxuICAgICAgY29uc3QgcmVmZXJyYWxDb2RlID0gc3Vic2NyaXB0aW9uLm1ldGFkYXRhPy5bJ3JlZmVycmFsQ29kZSddO1xyXG5cclxuICAgICAgaWYgKCFyZWZlcnJhbENvZGUgfHwgcmVmZXJyYWxDb2RlLnRyaW0oKSA9PT0gJycpIHtcclxuICAgICAgICBjb25zb2xlLmxvZygnTm8gcmVmZXJyYWwgY29kZSBmb3VuZCDigJQgbm8gYm9udXMgYXBwbGllZC4nKTtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIENoZWNrIGlmIHRoaXMgaXMgYSBzdWJzY3JpcHRpb24gb3IgU0xBIHB1cmNoYXNlXHJcbiAgICAgIGNvbnN0IHByb2R1Y3RUeXBlID0gc3Vic2NyaXB0aW9uLm1ldGFkYXRhPy5bJ3Byb2R1Y3RUeXBlJ107XHJcbiAgICAgIGNvbnN0IHNsYVRpZXIgPSBzdWJzY3JpcHRpb24ubWV0YWRhdGE/Llsnc2xhVGllciddO1xyXG4gICAgICBcclxuICAgICAgY29uc29sZS5sb2coYFByb2Nlc3NpbmcgcmVmZXJyYWwgYm9udXMgZm9yICR7cHJvZHVjdFR5cGV9IHB1cmNoYXNlLCBTTEEgdGllcjogJHtzbGFUaWVyfWApO1xyXG5cclxuICAgICAgLy8gR2V0dGluZyB0aGUgaW52aXRpbmcgY3VzdG9tZXIgdmlhIHJlZmVycmFsQ29kZSAoY3VzdG9tZXIuaWQpXHJcbiAgICAgIGNvbnN0IHJlZmVycmVyQ3VzdG9tZXIgPSBhd2FpdCBzdHJpcGUuY3VzdG9tZXJzLnJldHJpZXZlKHJlZmVycmFsQ29kZSk7XHJcbiAgICAgIGlmICghcmVmZXJyZXJDdXN0b21lciB8fCByZWZlcnJlckN1c3RvbWVyLmRlbGV0ZWQpIHtcclxuICAgICAgICBjb25zb2xlLndhcm4oYFJlZmVycmVyIGN1c3RvbWVyIG5vdCBmb3VuZCBvciBkZWxldGVkOiAke3JlZmVycmFsQ29kZX1gKTtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIEdldHRpbmcgYSBzdWJzY3JpcHRpb24gb2YgaW52aXRpbmcgY3VzdG9tZXIgKHJlZmVycmVyKS5cclxuICAgICAgY29uc3QgcmVmZXJyZXJTdWJzID0gYXdhaXQgc3RyaXBlLnN1YnNjcmlwdGlvbnMubGlzdCh7XHJcbiAgICAgICAgY3VzdG9tZXI6IHJlZmVycmFsQ29kZSxcclxuICAgICAgICBzdGF0dXM6ICdhY3RpdmUnLFxyXG4gICAgICAgIGxpbWl0OiAxLFxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGlmIChyZWZlcnJlclN1YnMuZGF0YS5sZW5ndGggPT09IDApIHtcclxuICAgICAgICBjb25zb2xlLndhcm4oYE5vIGFjdGl2ZSBzdWJzY3JpcHRpb24gZm91bmQgZm9yIHJlZmVycmVyICR7cmVmZXJyYWxDb2RlfWApO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG5cclxuICAgICAgY29uc3QgcmVmZXJyZXJTdWIgPSByZWZlcnJlclN1YnMuZGF0YVswXTtcclxuXHJcbiAgICAgIC8vIEFsd2F5cyBhZGQgYm9udXMgZm9yIGVhY2ggcmVmZXJyYWwsIHJlZ2FyZGxlc3Mgb2Ygd2hldGhlciBjdXN0b21lciB3YXMgcmVmZXJyZWQgYmVmb3JlXHJcbiAgICAgIGNvbnN0IHJlZmVycmVkQ3VzdG9tZXJJZCA9IHN1YnNjcmlwdGlvbi5jdXN0b21lcjtcclxuICAgICAgXHJcbiAgICAgIC8vIFRyYWNrIGFsbCByZWZlcnJhbCBldmVudHMgZm9yIGxvZ2dpbmcgcHVycG9zZXNcclxuICAgICAgY29uc3QgcmVmZXJyZWRMaXN0UmF3ID0gKHJlZmVycmVyQ3VzdG9tZXJbJ21ldGFkYXRhJ10gJiYgcmVmZXJyZXJDdXN0b21lclsnbWV0YWRhdGEnXVsncmVmZXJyZWRfY3VzdG9tZXJfaWRzJ10pIHx8ICcnO1xyXG4gICAgICBjb25zdCByZWZlcnJlZElkcyA9IHJlZmVycmVkTGlzdFJhdyA/IHJlZmVycmVkTGlzdFJhdy5zcGxpdCgnLCcpIDogW107XHJcbiAgICAgIFxyXG4gICAgICAvLyBBbHdheXMgYWRkIHRoZSBjdXN0b21lciBJRCB0byB0cmFjayBhbGwgcmVmZXJyYWwgZXZlbnRzXHJcbiAgICAgIHJlZmVycmVkSWRzLnB1c2gocmVmZXJyZWRDdXN0b21lcklkKTtcclxuICAgICAgXHJcbiAgICAgIGF3YWl0IHN0cmlwZS5jdXN0b21lcnMudXBkYXRlKHJlZmVycmFsQ29kZSwge1xyXG4gICAgICAgIG1ldGFkYXRhOiB7XHJcbiAgICAgICAgICByZWZlcnJlZF9jdXN0b21lcl9pZHM6IHJlZmVycmVkSWRzLmpvaW4oJywnKSxcclxuICAgICAgICB9LFxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGNvbnNvbGUubG9nKGBBZGRlZCByZWZlcnJhbCBib251czogJHtyZWZlcnJlZEN1c3RvbWVySWR9IHJlZmVycmVkIGJ5ICR7cmVmZXJyYWxDb2RlfSAodG90YWwgcmVmZXJyYWxzOiAke3JlZmVycmVkSWRzLmxlbmd0aH0pYCk7XHJcblxyXG4gICAgICAvLyBDYWxjdWxhdGlvbiBvZiByZW5ld2FsIGRhdGU6IGN1cnJlbnRfcGVyaW9kX2VuZCArIDEgbW9udGggZm9yIHRoaXMgcmVmZXJyYWxcclxuICAgICAgY29uc3QgY3VycmVudFBlcmlvZEVuZCA9XHJcbiAgICAgICAgcmVmZXJyZXJTdWJbJ2N1cnJlbnRfcGVyaW9kX2VuZCddIHx8XHJcbiAgICAgICAgcmVmZXJyZXJTdWIuaXRlbXM/LmRhdGE/LlswXT8uWydjdXJyZW50X3BlcmlvZF9lbmQnXSB8fFxyXG4gICAgICAgIHJlZmVycmVyU3ViWyd0cmlhbF9lbmQnXTtcclxuXHJcbiAgICAgIGlmICghY3VycmVudFBlcmlvZEVuZCB8fCBpc05hTihjdXJyZW50UGVyaW9kRW5kKSkge1xyXG4gICAgICAgIGNvbnNvbGUud2FybihcclxuICAgICAgICAgIGBJbnZhbGlkIG9yIG1pc3NpbmcgY3VycmVudF9wZXJpb2RfZW5kIChvciBmYWxsYmFjaykgZm9yIHN1YnNjcmlwdGlvbiAke3JlZmVycmVyU3ViLmlkfWBcclxuICAgICAgICApO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gQ2hlY2sgaWYgc3Vic2NyaXB0aW9uIGFscmVhZHkgaGFzIHBhdXNlX2NvbGxlY3Rpb24gd2l0aCByZXN1bWVzX2F0XHJcbiAgICAgIGxldCBleGlzdGluZ1Jlc3VtZXNBdCA9IGN1cnJlbnRQZXJpb2RFbmQ7XHJcbiAgICAgIGlmIChyZWZlcnJlclN1Yi5wYXVzZV9jb2xsZWN0aW9uPy5yZXN1bWVzX2F0KSB7XHJcbiAgICAgICAgZXhpc3RpbmdSZXN1bWVzQXQgPSByZWZlcnJlclN1Yi5wYXVzZV9jb2xsZWN0aW9uLnJlc3VtZXNfYXQ7XHJcbiAgICAgICAgY29uc29sZS5sb2coYEV4aXN0aW5nIGJvbnVzIHRpbWUgZm91bmQsIHJlc3VtZXNfYXQ6ICR7bmV3IERhdGUoZXhpc3RpbmdSZXN1bWVzQXQgKiAxMDAwKS50b0lTT1N0cmluZygpfWApO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyBBbHdheXMgYWRkIDEgbW9udGggYm9udXMgZm9yIGVhY2ggcmVmZXJyYWwsIGV2ZW4gZm9yIHJlcGVhdCBjdXN0b21lcnNcclxuICAgICAgY29uc3QgYWRkaXRpb25hbE1vbnRocyA9IDE7XHJcbiAgICAgIGNvbnN0IG5ld1Jlc3VtZXNBdCA9IGV4aXN0aW5nUmVzdW1lc0F0ICsgYWRkaXRpb25hbE1vbnRocyAqIDMwICogMjQgKiA2MCAqIDYwOyAvLyAxIG1vbnRoIGZvciB0aGlzIHJlZmVycmFsXHJcbiAgICAgIC8vY29uc3QgbmV3UmVzdW1lc0F0ID0gZXhpc3RpbmdSZXN1bWVzQXQgKyBhZGRpdGlvbmFsTW9udGhzICogNjA7IC8vIHRlc3Q6IDEgbWludXRlIHBlciByZWZlcnJhbFxyXG5cclxuICAgICAgYXdhaXQgc3RyaXBlLnN1YnNjcmlwdGlvbnMudXBkYXRlKHJlZmVycmVyU3ViLmlkLCB7XHJcbiAgICAgICAgcGF1c2VfY29sbGVjdGlvbjoge1xyXG4gICAgICAgICAgYmVoYXZpb3I6ICdtYXJrX3VuY29sbGVjdGlibGUnLFxyXG4gICAgICAgICAgcmVzdW1lc19hdDogbmV3UmVzdW1lc0F0LFxyXG4gICAgICAgIH0sXHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgY29uc29sZS5sb2coXHJcbiAgICAgICAgYFJlZmVycmVyICR7cmVmZXJyYWxDb2RlfSByZWNlaXZlZCBib251czogc3Vic2NyaXB0aW9uIGV4dGVuZGVkIGJ5ICR7cmVmZXJyZWRJZHMubGVuZ3RofSBtb250aChzKSwgbmV3IHJlc3VtZSBkYXRlOiAke25ldyBEYXRlKFxyXG4gICAgICAgICAgbmV3UmVzdW1lc0F0ICogMTAwMFxyXG4gICAgICAgICkudG9JU09TdHJpbmcoKX1gXHJcbiAgICAgICk7XHJcbiAgICB9IGNhdGNoIChlcnIpIHtcclxuICAgICAgY29uc29sZS5lcnJvcignUmVmZXJyYWwgcmV3YXJkIGVycm9yOicsIGVycik7XHJcbiAgICB9XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHByb2Nlc3NpbmcgaW52b2ljZTonLCBlcnJvcik7XHJcbiAgfVxyXG59XHJcbiJdLCJuYW1lcyI6WyJOZXh0UmVzcG9uc2UiLCJ3cml0ZUZpbGUiLCJta2RpciIsIlN0cmlwZSIsInBhdGgiLCJzdHJpcGUiLCJwcm9jZXNzIiwiZW52IiwiU1RSSVBFX1NFQ1JFVF9LRVkiLCJhcGlWZXJzaW9uIiwiY29uZmlnIiwiYXBpIiwiYm9keVBhcnNlciIsImJ1ZmZlciIsInJlYWRhYmxlIiwicmVhZGVyIiwiZ2V0UmVhZGVyIiwiY2h1bmtzIiwiZG9uZSIsInZhbHVlIiwicmVhZCIsInB1c2giLCJCdWZmZXIiLCJjb25jYXQiLCJjbGVhclJlZmVycmFsTWV0YWRhdGEiLCJjdXN0b21lcklkIiwiY3VzdG9tZXJzIiwidXBkYXRlIiwibWV0YWRhdGEiLCJyZWZlcnJlZF9jdXN0b21lcl9pZHMiLCJyZWZlcnJhbF9jb3VudCIsInJlZmVycmFsX2JvbnVzIiwiY29uc29sZSIsImxvZyIsImVycm9yIiwiUE9TVCIsInJlcSIsIndlYmhvb2tTZWNyZXQiLCJTVFJJUEVfV0VCSE9PS19TRUNSRVQiLCJzaWciLCJoZWFkZXJzIiwiZ2V0Iiwic3RhdHVzIiwiZXZlbnQiLCJyYXdCb2R5IiwiYm9keSIsIndlYmhvb2tzIiwiY29uc3RydWN0RXZlbnQiLCJlcnIiLCJtZXNzYWdlIiwidHlwZSIsInByb2Nlc3NJbnZvaWNlUGFpZCIsImRhdGEiLCJvYmplY3QiLCJzZXNzaW9uIiwicGF5bWVudF9zdGF0dXMiLCJpbnZvaWNlIiwiaWQiLCJjdXN0b21lciIsIndhcm4iLCJyZXMiLCJmZXRjaCIsIk5FWFRfUFVCTElDX0FQSV9VUkwiLCJtZXRob2QiLCJvayIsInBkZkJ1ZmZlciIsImFycmF5QnVmZmVyIiwiZmlsZW5hbWUiLCJudW1iZXIiLCJmaWxlUGF0aCIsImpvaW4iLCJjd2QiLCJkaXJuYW1lIiwicmVjdXJzaXZlIiwiZnJvbSIsInN0YXRzIiwidGhlbiIsImZzIiwic3RhdCIsInNpemUiLCJlcnJvclRleHQiLCJ0ZXh0Iiwic3Vic2NyaXB0aW9uSWQiLCJzdWJzY3JpcHRpb24iLCJzdWJzY3JpcHRpb25zIiwicmV0cmlldmUiLCJyZWZlcnJhbENvZGUiLCJ0cmltIiwicHJvZHVjdFR5cGUiLCJzbGFUaWVyIiwicmVmZXJyZXJDdXN0b21lciIsImRlbGV0ZWQiLCJyZWZlcnJlclN1YnMiLCJsaXN0IiwibGltaXQiLCJsZW5ndGgiLCJyZWZlcnJlclN1YiIsInJlZmVycmVkQ3VzdG9tZXJJZCIsInJlZmVycmVkTGlzdFJhdyIsInJlZmVycmVkSWRzIiwic3BsaXQiLCJjdXJyZW50UGVyaW9kRW5kIiwiaXRlbXMiLCJpc05hTiIsImV4aXN0aW5nUmVzdW1lc0F0IiwicGF1c2VfY29sbGVjdGlvbiIsInJlc3VtZXNfYXQiLCJEYXRlIiwidG9JU09TdHJpbmciLCJhZGRpdGlvbmFsTW9udGhzIiwibmV3UmVzdW1lc0F0IiwiYmVoYXZpb3IiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./app/api/stripe/webhook/route.ts\n");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fstripe%2Fwebhook%2Froute&page=%2Fapi%2Fstripe%2Fwebhook%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fstripe%2Fwebhook%2Froute.ts&appDir=C%3A%5CUsers%5CDmitryKiporenko%5CDesktop%5Cnew%5Csubscriptions-UAH%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CDmitryKiporenko%5CDesktop%5Cnew%5Csubscriptions-UAH&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!**********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fstripe%2Fwebhook%2Froute&page=%2Fapi%2Fstripe%2Fwebhook%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fstripe%2Fwebhook%2Froute.ts&appDir=C%3A%5CUsers%5CDmitryKiporenko%5CDesktop%5Cnew%5Csubscriptions-UAH%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CDmitryKiporenko%5CDesktop%5Cnew%5Csubscriptions-UAH&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \**********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   workAsyncStorage: () => (/* binding */ workAsyncStorage),\n/* harmony export */   workUnitAsyncStorage: () => (/* binding */ workUnitAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/route-kind */ \"(rsc)/./node_modules/next/dist/server/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var C_Users_DmitryKiporenko_Desktop_new_subscriptions_UAH_app_api_stripe_webhook_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/stripe/webhook/route.ts */ \"(rsc)/./app/api/stripe/webhook/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/stripe/webhook/route\",\n        pathname: \"/api/stripe/webhook\",\n        filename: \"route\",\n        bundlePath: \"app/api/stripe/webhook/route\"\n    },\n    resolvedPagePath: \"C:\\\\Users\\\\DmitryKiporenko\\\\Desktop\\\\new\\\\subscriptions-UAH\\\\app\\\\api\\\\stripe\\\\webhook\\\\route.ts\",\n    nextConfigOutput,\n    userland: C_Users_DmitryKiporenko_Desktop_new_subscriptions_UAH_app_api_stripe_webhook_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { workAsyncStorage, workUnitAsyncStorage, serverHooks } = routeModule;\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        workAsyncStorage,\n        workUnitAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIvaW5kZXguanM/bmFtZT1hcHAlMkZhcGklMkZzdHJpcGUlMkZ3ZWJob29rJTJGcm91dGUmcGFnZT0lMkZhcGklMkZzdHJpcGUlMkZ3ZWJob29rJTJGcm91dGUmYXBwUGF0aHM9JnBhZ2VQYXRoPXByaXZhdGUtbmV4dC1hcHAtZGlyJTJGYXBpJTJGc3RyaXBlJTJGd2ViaG9vayUyRnJvdXRlLnRzJmFwcERpcj1DJTNBJTVDVXNlcnMlNUNEbWl0cnlLaXBvcmVua28lNUNEZXNrdG9wJTVDbmV3JTVDc3Vic2NyaXB0aW9ucy1VQUglNUNhcHAmcGFnZUV4dGVuc2lvbnM9dHN4JnBhZ2VFeHRlbnNpb25zPXRzJnBhZ2VFeHRlbnNpb25zPWpzeCZwYWdlRXh0ZW5zaW9ucz1qcyZyb290RGlyPUMlM0ElNUNVc2VycyU1Q0RtaXRyeUtpcG9yZW5rbyU1Q0Rlc2t0b3AlNUNuZXclNUNzdWJzY3JpcHRpb25zLVVBSCZpc0Rldj10cnVlJnRzY29uZmlnUGF0aD10c2NvbmZpZy5qc29uJmJhc2VQYXRoPSZhc3NldFByZWZpeD0mbmV4dENvbmZpZ091dHB1dD0mcHJlZmVycmVkUmVnaW9uPSZtaWRkbGV3YXJlQ29uZmlnPWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7QUFBK0Y7QUFDdkM7QUFDcUI7QUFDZ0Q7QUFDN0g7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLHlHQUFtQjtBQUMzQztBQUNBLGNBQWMsa0VBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLFlBQVk7QUFDWixDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsUUFBUSxzREFBc0Q7QUFDOUQ7QUFDQSxXQUFXLDRFQUFXO0FBQ3RCO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDMEY7O0FBRTFGIiwic291cmNlcyI6WyIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQXBwUm91dGVSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL3JvdXRlLW1vZHVsZXMvYXBwLXJvdXRlL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgcGF0Y2hGZXRjaCBhcyBfcGF0Y2hGZXRjaCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi9wYXRjaC1mZXRjaFwiO1xuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIkM6XFxcXFVzZXJzXFxcXERtaXRyeUtpcG9yZW5rb1xcXFxEZXNrdG9wXFxcXG5ld1xcXFxzdWJzY3JpcHRpb25zLVVBSFxcXFxhcHBcXFxcYXBpXFxcXHN0cmlwZVxcXFx3ZWJob29rXFxcXHJvdXRlLnRzXCI7XG4vLyBXZSBpbmplY3QgdGhlIG5leHRDb25maWdPdXRwdXQgaGVyZSBzbyB0aGF0IHdlIGNhbiB1c2UgdGhlbSBpbiB0aGUgcm91dGVcbi8vIG1vZHVsZS5cbmNvbnN0IG5leHRDb25maWdPdXRwdXQgPSBcIlwiXG5jb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBBcHBSb3V0ZVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5BUFBfUk9VVEUsXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9zdHJpcGUvd2ViaG9vay9yb3V0ZVwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL3N0cmlwZS93ZWJob29rXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcInJvdXRlXCIsXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiYXBwL2FwaS9zdHJpcGUvd2ViaG9vay9yb3V0ZVwiXG4gICAgfSxcbiAgICByZXNvbHZlZFBhZ2VQYXRoOiBcIkM6XFxcXFVzZXJzXFxcXERtaXRyeUtpcG9yZW5rb1xcXFxEZXNrdG9wXFxcXG5ld1xcXFxzdWJzY3JpcHRpb25zLVVBSFxcXFxhcHBcXFxcYXBpXFxcXHN0cmlwZVxcXFx3ZWJob29rXFxcXHJvdXRlLnRzXCIsXG4gICAgbmV4dENvbmZpZ091dHB1dCxcbiAgICB1c2VybGFuZFxufSk7XG4vLyBQdWxsIG91dCB0aGUgZXhwb3J0cyB0aGF0IHdlIG5lZWQgdG8gZXhwb3NlIGZyb20gdGhlIG1vZHVsZS4gVGhpcyBzaG91bGRcbi8vIGJlIGVsaW1pbmF0ZWQgd2hlbiB3ZSd2ZSBtb3ZlZCB0aGUgb3RoZXIgcm91dGVzIHRvIHRoZSBuZXcgZm9ybWF0LiBUaGVzZVxuLy8gYXJlIHVzZWQgdG8gaG9vayBpbnRvIHRoZSByb3V0ZS5cbmNvbnN0IHsgd29ya0FzeW5jU3RvcmFnZSwgd29ya1VuaXRBc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzIH0gPSByb3V0ZU1vZHVsZTtcbmZ1bmN0aW9uIHBhdGNoRmV0Y2goKSB7XG4gICAgcmV0dXJuIF9wYXRjaEZldGNoKHtcbiAgICAgICAgd29ya0FzeW5jU3RvcmFnZSxcbiAgICAgICAgd29ya1VuaXRBc3luY1N0b3JhZ2VcbiAgICB9KTtcbn1cbmV4cG9ydCB7IHJvdXRlTW9kdWxlLCB3b3JrQXN5bmNTdG9yYWdlLCB3b3JrVW5pdEFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MsIHBhdGNoRmV0Y2gsICB9O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1hcHAtcm91dGUuanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fstripe%2Fwebhook%2Froute&page=%2Fapi%2Fstripe%2Fwebhook%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fstripe%2Fwebhook%2Froute.ts&appDir=C%3A%5CUsers%5CDmitryKiporenko%5CDesktop%5Cnew%5Csubscriptions-UAH%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CDmitryKiporenko%5CDesktop%5Cnew%5Csubscriptions-UAH&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!******************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \******************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "(ssr)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!******************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \******************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "../app-render/after-task-async-storage.external":
/*!***********************************************************************************!*\
  !*** external "next/dist/server/app-render/after-task-async-storage.external.js" ***!
  \***********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/after-task-async-storage.external.js");

/***/ }),

/***/ "../app-render/work-async-storage.external":
/*!*****************************************************************************!*\
  !*** external "next/dist/server/app-render/work-async-storage.external.js" ***!
  \*****************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-async-storage.external.js");

/***/ }),

/***/ "./work-unit-async-storage.external":
/*!**********************************************************************************!*\
  !*** external "next/dist/server/app-render/work-unit-async-storage.external.js" ***!
  \**********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-unit-async-storage.external.js");

/***/ }),

/***/ "child_process":
/*!********************************!*\
  !*** external "child_process" ***!
  \********************************/
/***/ ((module) => {

"use strict";
module.exports = require("child_process");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("crypto");

/***/ }),

/***/ "events":
/*!*************************!*\
  !*** external "events" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("events");

/***/ }),

/***/ "fs/promises":
/*!******************************!*\
  !*** external "fs/promises" ***!
  \******************************/
/***/ ((module) => {

"use strict";
module.exports = require("fs/promises");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("http");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

"use strict";
module.exports = require("https");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("path");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("util");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/stripe","vendor-chunks/qs","vendor-chunks/object-inspect","vendor-chunks/get-intrinsic","vendor-chunks/side-channel-list","vendor-chunks/side-channel-weakmap","vendor-chunks/has-symbols","vendor-chunks/function-bind","vendor-chunks/side-channel-map","vendor-chunks/side-channel","vendor-chunks/get-proto","vendor-chunks/call-bind-apply-helpers","vendor-chunks/dunder-proto","vendor-chunks/math-intrinsics","vendor-chunks/call-bound","vendor-chunks/es-errors","vendor-chunks/gopd","vendor-chunks/es-define-property","vendor-chunks/hasown","vendor-chunks/es-object-atoms"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fstripe%2Fwebhook%2Froute&page=%2Fapi%2Fstripe%2Fwebhook%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fstripe%2Fwebhook%2Froute.ts&appDir=C%3A%5CUsers%5CDmitryKiporenko%5CDesktop%5Cnew%5Csubscriptions-UAH%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CDmitryKiporenko%5CDesktop%5Cnew%5Csubscriptions-UAH&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();